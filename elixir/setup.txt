docker run --name discourse-db -e POSTGRES_PASSWORD=postgres -v /docker/discourse/db:/var/lib/postgresql/data -p 5432:5432 --restart=always -d postgres

create table Users (
	id int GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
	email text,
	username text
);

CREATE UNIQUE INDEX ON Users(email);
CREATE UNIQUE INDEX ON Users(username);

create table Timelines (
	id int GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
	title text NOT NULL,
	author int references Users(id)
);

CREATE INDEX ON Timelines(author);

create table TimelineEntries (
	id int GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
	timeline int references Timelines(id),
	timestamp timestamp NOT NULL,
	body text,
	sources text[],
	imgurl text,
	upvotes int,
	downvotes int
);

CREATE INDEX ON TimelineEntries(timeline);